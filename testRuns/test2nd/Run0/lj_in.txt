# Amin Esfandiarpour - Amin.esfandiarpour@ncbj.gov.pl- Am.esfandiyarpour@gmail.com

variable initTemp equal 0 #300          	# desired temperature
variable runTime equal 4 #0000 #2000000   	# number of increment 
variable srate equal 1.0e11 
#log	     	shearCoNiFe_glass${initTemp}-${srate}.log
units		lj #metal
atom_style	atomic
boundary	p p p
dimension	2
#read_data       FeNi_glass_${initTemp}.data

#--- define lattice
region mybox block -40.0 40.0 -40.0 40.0 -0.5 0.5

lattice sq 1.0 #keyword values ...
#lattice bcc 3.7 #keyword values ...

create_box 1 box  
create_atoms 1 box  

#create_box 1 box  
#create_atoms 3 box  

change_box all triclinic


mass 1 58.993
#mass 2 58.6934
#mass 3 51.9961
#mass 4 55.845
#mass 5 54.9380


neigh_modify delay 0
pair_style lj/cut 2.5 #meam/c
#pair_coeff * * library_CoNiCrFeMn.meam Co Ni Cr Fe Mn parameters.meam Co Ni Cr Fe Mn
pair_coeff * * 1 1

# Store final cell length for strain calculations
variable tmp equal "lx"
variable L0x equal ${tmp}
variable tmpy equal "ly"
variable L0y equal ${tmpy}
variable tmpz equal "lz"
variable L0z equal ${tmpz}


######################################
# DEFORMATION

timestep 0.001
fix 11 all setforce 0.0 0.0 0.0
fix 		1 all nve #/sllod temp ${initTemp} ${initTemp} 1
variable srate1 equal "v_srate / 1.0e12"
fix             2 all deform 1  xy erate ${srate1}  units box  remap x
#fix             2 all deform 1  x erate ${srate1}  units box  remap x
#fix             2 all deform 1  y erate ${srate1}  units box  remap x
compute 	1 all stress/atom NULL pair
#dump      1 all custom 1 NiFe_glass-${initTemp}-${srate}.dump id type x y z vx vy vz  meam_force.cpp ln.967: 15+6+1
dump    11 all custom 1 virialStress.xyz id type x y z c_1[1] c_1[2] c_1[3] c_1[4] c_1[5] c_1[6] c_1[7] c_1[13] c_1[22]
#dump 2 all custom 10000 dump.NiFe_glass-${initTemp}-${srate}.unwrap id type xu yu zu 
variable strainxy equal "(xy)/v_L0y"
variable  tmp3 equal "vol"
variable Volume equal ${tmp3}
compute		reducedstress all reduce sum c_1[22]
compute		reducedstress2 all reduce sum c_1[4]
variable	stress equal (c_reducedstress)/(${Volume})
variable	stress2 equal (c_reducedstress2)/(${Volume})
variable s1xy equal "v_stress"
#variable p1xy equal "v_strainxy"
#variable p1 equal "-pxy/10000"
thermo 1
thermo_style	custom step v_strainxy v_stress v_stress2 ke pe press temp 
#thermo_modify format line "%d %f %3.2e %3.2e"

#fix def1 all print 1 "${p1xy} ${p1} ${s1xy}" append NiFe_glass-${initTemp}-${srate}.txt 
run ${runTime}    

    


######################################
# SIMULATION DONE
print "All done"
